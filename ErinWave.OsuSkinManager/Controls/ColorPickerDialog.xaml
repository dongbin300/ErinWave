<Window x:Class="ErinWave.OsuSkinManager.ColorPickerDialog"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="색상 선택" Height="500" Width="600"
        WindowStartupLocation="CenterOwner" ResizeMode="NoResize"
        ShowInTaskbar="False" Background="#FF0D1117"
        MinHeight="500" MinWidth="600">

    <Window.Resources>
        <!-- Global Color Palette -->
        <SolidColorBrush x:Key="PrimaryBackground" Color="#FF0D1117"/>
        <SolidColorBrush x:Key="CardBackground" Color="#FF161B22"/>
        <SolidColorBrush x:Key="BorderBrush" Color="#FF30363D"/>
        <SolidColorBrush x:Key="AccentBlue" Color="#FF0969DA"/>
        <SolidColorBrush x:Key="AccentGreen" Color="#FF3FB950"/>
        <SolidColorBrush x:Key="AccentOrange" Color="#FFFB8500"/>
        <SolidColorBrush x:Key="TextPrimary" Color="#FFF0F6FC"/>
        <SolidColorBrush x:Key="TextSecondary" Color="#FF8B949E"/>
        <SolidColorBrush x:Key="TextMuted" Color="#FF484F58"/>

        <!-- 버튼 스타일 -->
        <Style x:Key="PrimaryButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="{StaticResource AccentBlue}"/>
            <Setter Property="Foreground" Value="White"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Padding" Value="16,12"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="Medium"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                                CornerRadius="6"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center"
                                            VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#FF1F6EB7"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="Background" Value="#FF1654A6"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <Style x:Key="SecondaryButtonStyle" TargetType="Button">
            <Setter Property="Background" Value="{StaticResource CardBackground}"/>
            <Setter Property="Foreground" Value="{StaticResource TextPrimary}"/>
            <Setter Property="BorderBrush" Value="{StaticResource BorderBrush}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="16,12"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="Medium"/>
            <Setter Property="Cursor" Value="Hand"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Button">
                        <Border Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="6"
                                Padding="{TemplateBinding Padding}">
                            <ContentPresenter HorizontalAlignment="Center"
                                            VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsMouseOver" Value="True">
                                <Setter Property="Background" Value="#FF1C2128"/>
                            </Trigger>
                            <Trigger Property="IsPressed" Value="True">
                                <Setter Property="Background" Value="#FF262C36"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Header Text 스타일 -->
        <Style x:Key="HeaderTextStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="18"/>
            <Setter Property="FontWeight" Value="SemiBold"/>
            <Setter Property="Foreground" Value="{StaticResource TextPrimary}"/>
        </Style>

        <!-- Subheader Text 스타일 -->
        <Style x:Key="SubheaderTextStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="Medium"/>
            <Setter Property="Foreground" Value="{StaticResource TextSecondary}"/>
        </Style>

        <!-- Body Text 스타일 -->
        <Style x:Key="BodyTextStyle" TargetType="TextBlock">
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="FontWeight" Value="Normal"/>
            <Setter Property="Foreground" Value="{StaticResource TextPrimary}"/>
        </Style>

        <!-- Modern TextBox 스타일 -->
        <Style x:Key="ModernTextBoxStyle" TargetType="TextBox">
            <Setter Property="Background" Value="{StaticResource CardBackground}"/>
            <Setter Property="Foreground" Value="{StaticResource TextPrimary}"/>
            <Setter Property="BorderBrush" Value="{StaticResource BorderBrush}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="12"/>
            <Setter Property="FontSize" Value="14"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="TextBox">
                        <Border Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                CornerRadius="6">
                            <ScrollViewer x:Name="PART_ContentHost" Margin="{TemplateBinding Padding}"/>
                        </Border>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>

        <!-- Modern Slider 스타일 -->
        <Style x:Key="ModernSliderStyle" TargetType="Slider">
            <Setter Property="Height" Value="20"/>
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="Slider">
                        <Grid>
                            <Border Height="4" Background="{StaticResource BorderBrush}" CornerRadius="2" VerticalAlignment="Center"/>
                            <Border Height="4" Background="{TemplateBinding Foreground}" CornerRadius="2"
                                   HorizontalAlignment="Left" VerticalAlignment="Center"
                                   Width="{Binding RelativeSource={RelativeSource TemplatedParent}, Path=Value, Converter={StaticResource SliderValueConverter}}"/>
                            <Thumb Width="16" Height="16" Background="{StaticResource AccentBlue}"
                                   Template="{DynamicResource SliderThumbTemplate}"/>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </Window.Resources>

    <Grid Margin="24">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="24"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="24"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="24"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- 상단 헤더 -->
        <Border Grid.Row="0" Background="{StaticResource CardBackground}"
                BorderBrush="{StaticResource BorderBrush}" BorderThickness="1"
                CornerRadius="8" Padding="24">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                </Grid.ColumnDefinitions>

                <!-- 왼쪽: 제목 -->
                <StackPanel Grid.Column="0" Orientation="Horizontal" VerticalAlignment="Center">
                    <Ellipse Width="8" Height="8" Fill="{StaticResource AccentOrange}" VerticalAlignment="Center" Margin="0,0,12,0"/>
                    <TextBlock Text="색상 선택기" Style="{StaticResource HeaderTextStyle}" FontSize="16"/>
                </StackPanel>

                <!-- 오른쪽: 현재 색상 미리보기 -->
                <StackPanel Grid.Column="1" Orientation="Horizontal" VerticalAlignment="Center" HorizontalAlignment="Right">
                    <TextBlock Text="미리보기:" Style="{StaticResource SubheaderTextStyle}" VerticalAlignment="Center" Margin="0,0,12,0"/>
                    <Border CornerRadius="6" BorderBrush="{StaticResource BorderBrush}" BorderThickness="1">
                        <Rectangle Name="ColorPreview" Width="60" Height="30" Fill="#FFFFFFFF"/>
                    </Border>
                </StackPanel>
            </Grid>
        </Border>

        <!-- 메인 색상 선택 영역 -->
        <Grid Grid.Row="2">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="1.5*"/>
                <ColumnDefinition Width="24"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>

            <!-- 왼쪽: 미리 정의된 색상 팔레트 -->
            <Border Grid.Column="0" Background="{StaticResource CardBackground}"
                    BorderBrush="{StaticResource BorderBrush}" BorderThickness="1"
                    CornerRadius="8" Padding="24">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="16"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>

                    <!-- 제목 -->
                    <StackPanel Grid.Row="0" Orientation="Horizontal">
                        <Ellipse Width="8" Height="8" Fill="{StaticResource AccentBlue}" VerticalAlignment="Center" Margin="0,0,12,0"/>
                        <TextBlock Text="미리 정의된 색상" Style="{StaticResource HeaderTextStyle}" FontSize="14"/>
                    </StackPanel>

                    <!-- 색상 팔레트 -->
                    <ScrollViewer Grid.Row="2" VerticalScrollBarVisibility="Auto">
                        <WrapPanel Name="ColorPalette" Orientation="Horizontal" Margin="4"/>
                    </ScrollViewer>
                </Grid>
            </Border>

            <!-- 오른쪽: ARGB 값 및 커스텀 조절 -->
            <Border Grid.Column="2" Background="{StaticResource CardBackground}"
                    BorderBrush="{StaticResource BorderBrush}" BorderThickness="1"
                    CornerRadius="8" Padding="24">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="16"/>
                        <RowDefinition Height="*"/>
                        <RowDefinition Height="16"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>

                    <!-- 제목 -->
                    <StackPanel Grid.Row="0" Orientation="Horizontal">
                        <Ellipse Width="8" Height="8" Fill="{StaticResource AccentGreen}" VerticalAlignment="Center" Margin="0,0,12,0"/>
                        <TextBlock Text="색상 조절" Style="{StaticResource HeaderTextStyle}" FontSize="14"/>
                    </StackPanel>

                    <!-- ARGB 값 정보 -->
                    <Border Grid.Row="2" Background="{StaticResource PrimaryBackground}"
                           BorderBrush="{StaticResource BorderBrush}" BorderThickness="1" CornerRadius="6" Padding="16">
                        <StackPanel>
                            <TextBlock Text="ARGB 값" Style="{StaticResource SubheaderTextStyle}" Margin="0,0,0,12"/>
                            <TextBox Name="ArgbTextBlock" IsReadOnly="True" Style="{StaticResource ModernTextBoxStyle}" Height="40"/>
                            <TextBlock Name="HexTextBlock" Text="#FFFFFFFF" Style="{StaticResource SubheaderTextStyle}"
                                       HorizontalAlignment="Center" Margin="0,8,0,0"/>
                        </StackPanel>
                    </Border>

                    <!-- 슬라이더 컨트롤 -->
                    <StackPanel Grid.Row="4">
                        <!-- Alpha -->
                        <Grid Margin="0,8">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="30"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="50"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Grid.Column="0" Text="A:" Style="{StaticResource BodyTextStyle}" VerticalAlignment="Center"/>
                            <Slider Grid.Column="1" Name="AlphaSlider" Minimum="0" Maximum="255" Value="255"
                                   VerticalAlignment="Center" Margin="8,0"/>
                            <TextBox Grid.Column="2" Name="AlphaText" Style="{StaticResource ModernTextBoxStyle}"
                                    TextChanged="AlphaText_TextChanged" Height="30"/>
                        </Grid>

                        <!-- Red -->
                        <Grid Margin="0,8">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="30"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="50"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Grid.Column="0" Text="R:" Style="{StaticResource BodyTextStyle}" VerticalAlignment="Center"/>
                            <Slider Grid.Column="1" Name="RedSlider" Minimum="0" Maximum="255" Value="255"
                                   VerticalAlignment="Center" Margin="8,0" Foreground="#FFFF0000"/>
                            <TextBox Grid.Column="2" Name="RedText" Style="{StaticResource ModernTextBoxStyle}"
                                    TextChanged="ColorText_TextChanged" Height="30"/>
                        </Grid>

                        <!-- Green -->
                        <Grid Margin="0,8">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="30"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="50"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Grid.Column="0" Text="G:" Style="{StaticResource BodyTextStyle}" VerticalAlignment="Center"/>
                            <Slider Grid.Column="1" Name="GreenSlider" Minimum="0" Maximum="255" Value="255"
                                   VerticalAlignment="Center" Margin="8,0" Foreground="#FF00FF00"/>
                            <TextBox Grid.Column="2" Name="GreenText" Style="{StaticResource ModernTextBoxStyle}"
                                    TextChanged="ColorText_TextChanged" Height="30"/>
                        </Grid>

                        <!-- Blue -->
                        <Grid Margin="0,8">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="30"/>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="50"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Grid.Column="0" Text="B:" Style="{StaticResource BodyTextStyle}" VerticalAlignment="Center"/>
                            <Slider Grid.Column="1" Name="BlueSlider" Minimum="0" Maximum="255" Value="255"
                                   VerticalAlignment="Center" Margin="8,0" Foreground="#FF0000FF"/>
                            <TextBox Grid.Column="2" Name="BlueText" Style="{StaticResource ModernTextBoxStyle}"
                                    TextChanged="ColorText_TextChanged" Height="30"/>
                        </Grid>
                    </StackPanel>
                </Grid>
            </Border>
        </Grid>

        <!-- 하단 버튼 -->
        <StackPanel Grid.Row="6" Orientation="Horizontal" HorizontalAlignment="Right">
            <Button Name="OKButton" Content="✅ 확인" Style="{StaticResource PrimaryButtonStyle}"
                   IsDefault="True" Click="OKButton_Click"/>
            <Button Name="CancelButton" Content="❌ 취소" Style="{StaticResource SecondaryButtonStyle}"
                   IsCancel="True" Click="CancelButton_Click" Margin="12,0,0,0"/>
        </StackPanel>
    </Grid>
</Window>